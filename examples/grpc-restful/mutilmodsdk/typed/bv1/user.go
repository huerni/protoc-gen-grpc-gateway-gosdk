// Code generated by protoc-gen-grpc-gateway-gosdk. DO NOT EDIT.
// versions:
//    protoc-gen-grpc-gateway-gosdk 1.8.1-next-f3e4de
// type: user

package bv1

import (
	"context"

	"github.com/jaronnie/autosdk/pb/bpb"
	"github.com/jaronnie/autosdk/rest"
)

type UserGetter interface {
	User() UserInterface
}

type UserInterface interface {
	// Add trans *bpb.AddUserReq into *bpb.AddUserResp
	// API /gateway/b/api/v1.0/user/add
	Add(ctx context.Context, param *bpb.AddUserReq) (*bpb.AddUserResp, error)

	UserExpansion
}

type userClient struct {
	client rest.Interface
}

func newUserClient(c *Bv1Client) *userClient {
	return &userClient{
		client: c.RESTClient(),
	}
}

func (x *userClient) Add(ctx context.Context, param *bpb.AddUserReq) (*bpb.AddUserResp, error) {
	var resp bpb.AddUserResp
	err := x.client.Verb("GET").
		SubPath(
			"/gateway/b/api/v1.0/user/add",
		).
		Params(
			rest.QueryParam{Name: "name", Value: param.Name},
			rest.QueryParam{Name: "age", Value: param.Age},
		).
		Body(nil).
		Do(ctx).
		Into(&resp, false)

	if err != nil {
		return nil, err
	}

	return &resp, nil
}
